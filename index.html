<!DOCTYPE html>
<html lang="ar" dir="rtl">
<head>
    <meta charset="UTF-8">
    <meta name="viewport" content="width=device-width, initial-scale=1.0">
    <title>Ø³ÙŠÙ… Ø¬ÙŠÙ… - Ù†Ø³Ø®Ø© LN Ø§Ù„Ù…Ø·ÙˆØ±Ø©</title>
    <style>
        :root {
            --bg-color: #000000;
            --card-bg: #0f172a;
            --accent-blue: #007bff;
            --text-primary: #f8fafc;
        }

        body {
            font-family: 'Segoe UI', Tahoma, Geneva, Verdana, sans-serif;
            background-color: var(--bg-color); color: var(--text-primary);
            margin: 0; overflow-x: hidden; display: flex; flex-direction: column;
            align-items: center; min-height: 100vh;
        }

        /* --- Ù†Ø¸Ø§Ù… Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ø§Ù„Ø¥Ø¯Ø§Ø±ÙŠ Ø§Ù„Ø«Ø§Ø¨Øª --- */
        #admin-overlay {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: rgba(0, 0, 0, 0.98); 
            display: none; flex-direction: column; justify-content: center;
            align-items: center; z-index: 20000; text-align: center;
            border: 5px solid var(--accent-blue);
            box-shadow: inset 0 0 100px rgba(0, 123, 255, 0.5);
        }

        .alert-title {
            color: var(--accent-blue); font-size: 3rem; margin-bottom: 20px;
            font-weight: 900; text-shadow: 0 0 20px var(--accent-blue);
        }
        .alert-msg {
            color: #fff; font-size: 2.5rem; font-weight: bold;
            padding: 0 30px; line-height: 1.5;
        }

        #intro-screen {
            position: fixed; top: 0; left: 0; width: 100%; height: 100%;
            background: #000; display: flex; justify-content: center;
            align-items: center; z-index: 9999;
        }
        .shiny-text {
            font-size: 4rem; font-weight: 900; color: var(--accent-blue);
            text-shadow: 0 0 30px var(--accent-blue);
        }

        #top-timer-bar {
            display: none; background-color: var(--accent-blue);
            color: #fff; padding: 10px 40px; border-radius: 50px;
            font-size: 1.8rem; font-weight: bold; margin-top: 20px;
        }

        #categories-screen {
            display: none; width: 95%; max-width: 1200px;
            grid-template-columns: repeat(auto-fit, minmax(300px, 1fr));
            gap: 20px; padding: 40px 20px;
        }
        .cat-card {
            background: var(--card-bg); border-radius: 20px;
            border: 2px solid #1e293b; transition: 0.3s;
        }
        .cat-card:hover { border-color: var(--accent-blue); transform: translateY(-5px); }
        .cat-main { display: flex; width: 100%; justify-content: space-between; align-items: center; }
        .points-col { display: flex; flex-direction: column; gap: 8px; padding: 15px; }
        .point-box {
            background: #1e293b; color: #fff; width: 60px; height: 60px;
            display: flex; align-items: center; justify-content: center;
            font-weight: bold; cursor: pointer; border-radius: 12px; transition: 0.3s;
        }
        .point-box:hover:not(.used) { background: var(--accent-blue); }
        .point-box.used { opacity: 0.1; cursor: not-allowed; }
        .cat-title {
            text-align: center; background: var(--accent-blue);
            color: #fff; padding: 10px; font-weight: bold; border-radius: 0 0 18px 18px;
        }

        .options-container {
            display: grid; grid-template-columns: 1fr 1fr; gap: 15px; margin-top: 30px;
        }
        .option-btn {
            background: #1e293b; border: 2px solid #334155; color: white;
            padding: 20px; border-radius: 15px; font-size: 1.2rem; cursor: pointer;
            transition: 0.3s; text-align: right;
        }
        .option-btn:hover { border-color: var(--accent-blue); background: #0f172a; }

        #game-interface { display: none; width: 98%; justify-content: space-between; margin-top: 20px; }
        .sidebar {
            width: 250px; background: #0f172a; border: 2px solid var(--accent-blue);
            padding: 20px; border-radius: 20px;
        }
        .score-display { font-size: 4rem; font-weight: 900; color: var(--accent-blue); }
        
        .help-item {
            background: rgba(255,255,255,0.05); padding: 15px; margin-top: 10px;
            border-radius: 12px; cursor: pointer; transition: 0.3s;
        }
        .help-item.used-help { background: #334155; text-decoration: line-through; opacity: 0.5; }

        .question-area { flex-grow: 1; margin: 0 30px; }
        .question-card { background: #0f172a; padding: 50px; border-radius: 30px; border: 1px solid #1e293b; }

        .win-btn {
            background: var(--accent-blue); color: white; border: none;
            padding: 15px 40px; margin: 10px; border-radius: 12px; font-weight: bold; cursor: pointer;
        }

        #setup-screen { display: none; flex-direction: column; align-items: center; justify-content: center; height: 80vh; }
        input { width: 300px; padding: 15px; margin: 10px; background: #1e293b; border: 1px solid var(--accent-blue); color: #fff; border-radius: 10px; text-align: center; }
    </style>
</head>
<body>

    <div id="admin-overlay">
        <div class="alert-title">S Y S T E M - A L E R T</div>
        <div class="alert-msg" id="alert-text">Ø±Ø³Ø§Ù„Ø© Ø¥Ø¯Ø§Ø±ÙŠØ© Ù‡Ø§Ù…Ø©</div>
        <button class="win-btn" style="margin-top:40px" onclick="closeAlert()">Ø¥ØºÙ„Ø§Ù‚</button>
    </div>

    <div id="intro-screen"><div class="shiny-text">LN EDITION</div></div>
    <div id="top-timer-bar">00:00</div>

    <div id="setup-screen">
        <h1 style="color:var(--accent-blue)">Ø³ÙŠÙ… Ø¬ÙŠÙ… - Ù†Ø³Ø®Ø© Ø§Ù„Ø£Ø²Ø±Ù‚ ÙˆØ§Ù„Ø£Ø³ÙˆØ¯</h1>
        <input type="text" id="t1" value="Ø¯Ø±Ø¨Ø­Ù‡">
        <input type="text" id="t2" placeholder="Ø§Ø³Ù… Ø§Ù„ÙØ±ÙŠÙ‚ Ø§Ù„Ø«Ø§Ù†ÙŠ">
        <button class="win-btn" onclick="showCategories()">Ø¯Ø®ÙˆÙ„ Ø§Ù„Ù…Ø³Ø§Ø¨Ù‚Ø©</button>
    </div>

    <div id="categories-screen"></div>

    <div id="game-interface">
        <div class="sidebar">
            <h2 id="side-name-1"></h2>
            <div class="score-display" id="score1">0</div>
            <div class="help-item" onclick="this.classList.add('used-help')">ğŸ“ Ø§ØªØµØ§Ù„</div>
            <div class="help-item" onclick="this.classList.add('used-help')">âœŒï¸ Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨Ø©</div>
        </div>

        <div class="question-area" id="q-content"></div>

        <div class="sidebar">
            <h2 id="side-name-2"></h2>
            <div class="score-display" id="score2">0</div>
            <div class="help-item" onclick="this.classList.add('used-help')">ğŸ“ Ø§ØªØµØ§Ù„</div>
            <div class="help-item" onclick="this.classList.add('used-help')">âœŒï¸ Ø­Ø°Ù Ø¥Ø¬Ø§Ø¨Ø©</div>
        </div>
    </div>

    <script type="module">
        import { initializeApp } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-app.js";
        import { getDatabase, ref, onValue } from "https://www.gstatic.com/firebasejs/10.7.1/firebase-database.js";

        const firebaseConfig = {
            apiKey: "AIzaSyBZYjgSDNbHds0PPduqw-hO9Xz3cb21uMI",
            authDomain: "live-zone-management.firebaseapp.com",
            databaseURL: "https://live-zone-management-default-rtdb.firebaseio.com",
            projectId: "live-zone-management",
            storageBucket: "live-zone-management.firebasestorage.app",
            messagingSenderId: "548749835258",
            appId: "1:548749835258:web:80560271840af10ce90243"
        };

        const app = initializeApp(firebaseConfig);
        const db = getDatabase(app);

        // Ù…Ø±Ø§Ù‚Ø¨Ø© Ø§Ù„ØªÙ†Ø¨ÙŠÙ‡ Ù…Ù† Firebase
        const alertRef = ref(db, 'system_alert');
        onValue(alertRef, (snapshot) => {
            const msg = snapshot.val();
            if(msg) {
                document.getElementById('alert-text').innerText = msg;
                document.getElementById('admin-overlay').style.display = 'flex';
            }
        });
    </script>

    <script>
        let score1 = 0, score2 = 0, currentPoints = 0, lastBox = null;

        const bank = {
            "Ø¹Ø§Ù„Ù… Ø§Ù„ØªÙƒÙ†ÙˆÙ„ÙˆØ¬ÙŠØ§": {
                icon: "ğŸ’»",
                left: { 
                    200: {q: "Ù…Ø§ Ù‡ÙŠ Ù„ØºØ© Ø§Ù„Ø¨Ø±Ù…Ø¬Ø© Ø§Ù„Ø£ÙƒØ«Ø± Ø§Ø³ØªØ®Ø¯Ø§Ù…Ø§Ù‹ ÙÙŠ ØªØ·ÙˆÙŠØ± Ø§Ù„ÙˆÙŠØ¨ØŸ", options: ["Python", "JavaScript", "C++"], a: "JavaScript"},
                    400: {q: "Ù…Ø§Ø°Ø§ ÙŠØ±Ù…Ø² Ø§Ø®ØªØµØ§Ø± CPUØŸ", options: ["Ù…Ø¹Ø§Ù„Ø¬ Ù…Ø±ÙƒØ²ÙŠ", "Ø°Ø§ÙƒØ±Ø© ÙˆØµÙˆÙ„", "ÙƒØ±Øª Ø´Ø§Ø´Ø©"], a: "Ù…Ø¹Ø§Ù„Ø¬ Ù…Ø±ÙƒØ²ÙŠ"},
                    600: {q: "ÙÙŠ Ø£ÙŠ Ø¹Ø§Ù… ØªÙ… Ø¥Ø·Ù„Ø§Ù‚ Ø£ÙˆÙ„ Ù‡Ø§ØªÙ Ø¢ÙŠÙÙˆÙ†ØŸ", options: ["2005", "2007", "2009"], a: "2007"}
                },
                right: {
                    200: {q: "Ù…Ù† Ù‡Ùˆ Ù…Ø¤Ø³Ø³ Ø´Ø±ÙƒØ© Ù…Ø§ÙŠÙƒØ±ÙˆØ³ÙˆÙØªØŸ", options: ["Ø³ØªÙŠÙ Ø¬ÙˆØ¨Ø²", "Ø¨ÙŠÙ„ ØºÙŠØªØ³", "Ø¥ÙŠÙ„ÙˆÙ† Ù…Ø§Ø³Ùƒ"], a: "Ø¨ÙŠÙ„ ØºÙŠØªØ³"},
                    400: {q: "Ø£ÙŠ Ø´Ø±ÙƒØ© Ø·ÙˆØ±Øª Ù†Ø¸Ø§Ù… Ø§Ù„Ø£Ù†Ø¯Ø±ÙˆÙŠØ¯ØŸ", options: ["Ø£Ø¨Ù„", "Ø¬ÙˆØ¬Ù„", "Ø³Ø§Ù…Ø³ÙˆÙ†Ø¬"], a: "Ø¬ÙˆØ¬Ù„"},
                    600: {q: "Ù…Ø§ Ù‡ÙŠ Ø£ÙƒØ¨Ø± Ø³Ø¹Ø© ØªØ®Ø²ÙŠÙ†ÙŠØ© Ù…Ù…Ø§ ÙŠÙ„ÙŠØŸ", options: ["1 ØªÙŠØ±Ø§Ø¨Ø§ÙŠØª", "1024 Ø¬ÙŠØ¬Ø§Ø¨Ø§ÙŠØª", "ÙƒÙ„Ø§Ù‡Ù…Ø§ Ù…ØªØ³Ø§ÙˆÙŠØ§Ù†"], a: "ÙƒÙ„Ø§Ù‡Ù…Ø§ Ù…ØªØ³Ø§ÙˆÙŠØ§Ù†"}
                }
            },
            "ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…": {
                icon: "âš½",
                left: {
                    200: {q: "ÙƒÙ… Ø¹Ø¯Ø¯ Ù„Ø§Ø¹Ø¨ÙŠ ÙØ±ÙŠÙ‚ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù… Ø¯Ø§Ø®Ù„ Ø§Ù„Ù…Ù„Ø¹Ø¨ØŸ", options: ["10", "11", "12"], a: "11"},
                    400: {q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù„Ø§Ø¹Ø¨ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ù€ (Ø§Ù„Ø¨Ø±ØºÙˆØ«)ØŸ", options: ["Ø±ÙˆÙ†Ø§Ù„Ø¯Ùˆ", "Ù…ÙŠØ³ÙŠ", "Ù†ÙŠÙ…Ø§Ø±"], a: "Ù…ÙŠØ³ÙŠ"},
                    600: {q: "Ø£ÙŠ Ø¯ÙˆÙ„Ø© ÙØ§Ø²Øª Ø¨ÙƒØ£Ø³ Ø§Ù„Ø¹Ø§Ù„Ù… 2022ØŸ", options: ["ÙØ±Ù†Ø³Ø§", "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†", "Ø§Ù„Ù…ØºØ±Ø¨"], a: "Ø§Ù„Ø£Ø±Ø¬Ù†ØªÙŠÙ†"}
                },
                right: {
                    200: {q: "ÙƒÙ… Ù…Ø¯Ø© Ø§Ù„Ø´ÙˆØ· Ø§Ù„ÙˆØ§Ø­Ø¯ ÙÙŠ ÙƒØ±Ø© Ø§Ù„Ù‚Ø¯Ù…ØŸ", options: ["40 Ø¯Ù‚ÙŠÙ‚Ø©", "45 Ø¯Ù‚ÙŠÙ‚Ø©", "50 Ø¯Ù‚ÙŠÙ‚Ø©"], a: "45 Ø¯Ù‚ÙŠÙ‚Ø©"},
                    400: {q: "Ù…Ù† Ù‡Ùˆ Ø§Ù„Ù†Ø§Ø¯ÙŠ Ø§Ù„Ù…Ù„Ù‚Ø¨ Ø¨Ù€ (Ø§Ù„Ù…Ø±Ù†ØºÙŠ)ØŸ", options: ["Ø¨Ø±Ø´Ù„ÙˆÙ†Ø©", "Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯", "Ù„ÙŠÙØ±Ø¨ÙˆÙ„"], a: "Ø±ÙŠØ§Ù„ Ù…Ø¯Ø±ÙŠØ¯"},
                    600: {q: "Ø£ÙŠÙ† Ø£Ù‚ÙŠÙ… Ø£ÙˆÙ„ Ù…ÙˆÙ†Ø¯ÙŠØ§Ù„ ÙÙŠ Ø§Ù„ØªØ§Ø±ÙŠØ® Ø¹Ø§Ù… 1930ØŸ", options: ["Ø§Ù„Ø¨Ø±Ø§Ø²ÙŠÙ„", "Ø§Ù„Ø£ÙˆØ±ÙˆØºÙˆØ§ÙŠ", "Ø¥ÙŠØ·Ø§Ù„ÙŠØ§"], a: "Ø§Ù„Ø£ÙˆØ±ÙˆØºÙˆØ§ÙŠ"}
                }
            }
        };

        function closeAlert() { document.getElementById('admin-overlay').style.display = 'none'; }

        setTimeout(() => {
            document.getElementById('intro-screen').style.display = 'none';
            document.getElementById('setup-screen').style.display = 'flex';
        }, 2000);

        function showCategories() {
            document.getElementById('side-name-1').innerText = document.getElementById('t1').value;
            document.getElementById('side-name-2').innerText = document.getElementById('t2').value;
            document.getElementById('setup-screen').style.display = 'none';
            document.getElementById('top-timer-bar').style.display = 'block';
            const screen = document.getElementById('categories-screen');
            screen.style.display = 'grid';
            screen.innerHTML = "";
            Object.keys(bank).forEach(cat => {
                screen.innerHTML += `
                    <div class="cat-card">
                        <div class="cat-main">
                            <div class="points-col">
                                <div class="point-box" onclick="loadQ('${cat}','left',200, this)">200</div>
                                <div class="point-box" onclick="loadQ('${cat}','left',400, this)">400</div>
                                <div class="point-box" onclick="loadQ('${cat}','left',600, this)">600</div>
                            </div>
                            <div style="font-size: 3rem;">${bank[cat].icon}</div>
                            <div class="points-col">
                                <div class="point-box" onclick="loadQ('${cat}','right',200, this)">200</div>
                                <div class="point-box" onclick="loadQ('${cat}','right',400, this)">400</div>
                                <div class="point-box" onclick="loadQ('${cat}','right',600, this)">600</div>
                            </div>
                        </div>
                        <div class="cat-title">${cat}</div>
                    </div>`;
            });
        }

        function loadQ(cat, side, pts, el) {
            if(el.classList.contains('used')) return;
            currentPoints = pts; lastBox = el;
            const qData = bank[cat][side][pts];
            document.getElementById('categories-screen').style.display = 'none';
            document.getElementById('game-interface').style.display = 'flex';
            
            let optionsHtml = qData.options.map(opt => `<button class="option-btn" onclick="checkAns(this, '${qData.a}')">${opt}</button>`).join('');
            
            document.getElementById('q-content').innerHTML = `
                <div class="question-card">
                    <h2 style="color:var(--accent-blue)">${cat} - ${pts} Ù†Ù‚Ø·Ø©</h2>
                    <p style="font-size:2.2rem; margin:20px 0;">${qData.q}</p>
                    <div class="options-container">${optionsHtml}</div>
                    <div id="win-area" style="display:none; margin-top:30px;">
                        <button class="win-btn" onclick="addPts(1)">ÙÙˆØ² ${document.getElementById('t1').value}</button>
                        <button class="win-btn" onclick="addPts(2)">ÙÙˆØ² ${document.getElementById('t2').value}</button>
                    </div>
                </div>`;
        }

        function checkAns(btn, correct) {
            if(btn.innerText === correct) {
                btn.style.background = "#28a745";
                document.getElementById('win-area').style.display = "block";
            } else {
                btn.style.background = "#dc3545";
                alert("Ø¥Ø¬Ø§Ø¨Ø© Ø®Ø§Ø·Ø¦Ø©!");
            }
        }

        function addPts(team) {
            if(team === 1) { score1 += currentPoints; document.getElementById('score1').innerText = score1; }
            else { score2 += currentPoints; document.getElementById('score2').innerText = score2; }
            lastBox.classList.add('used');
            document.getElementById('game-interface').style.display = 'none';
            document.getElementById('categories-screen').style.display = 'grid';
        }

        let s = 0; setInterval(() => {
            s++; let m = Math.floor(s/60), sec = s%60;
            document.getElementById('top-timer-bar').innerText = `${m<10?'0'+m:m}:${sec<10?'0'+sec:sec}`;
        }, 1000);
    </script>
</body>
</html>
